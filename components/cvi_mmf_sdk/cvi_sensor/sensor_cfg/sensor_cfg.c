#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include "cvi_sns_ctrl.h"
#include "sensor_cfg.h"

/*
 * sensor_cfg.c - Sensor Configuration Core Module
 *
 * Functionality:
 * 1. Configure sensor parameters for ISP and VI subsystems
 * 2. Provide standardized interfaces for sensor property acquisition
 *
 * Maintenance Guide:
 * When adding new sensors, MUST extend case handling in following functions:
 *
 * Core Configuration Functions:
 * [x] cvi_sns_getsize        - Set sensor resolution
 * [x] cvi_sns_getbayerformat - Configure Bayer pattern
 * [x] cvi_sns_getdevattr     - Get device attributes (interface mode/data format)
 * [x] cvi_sns_getyuvbypass  - Set YUV sensor ISP bypass flag
 * [x] cvi_sns_getispattr     - Configure ISP properties (frame rate/channel count)
 * [x] cvi_sns_getsnsobj      - Retrieve sensor operation objects
 * [x] cvi_sns_getsnswdrattr  - Configure WDR mode attributes
 *
 * Note: [x] indicates required extension points
 */

ISP_SENSOR_EXP_FUNC_S gSensorExpFunc[VI_MAX_DEV_NUM];
AE_SENSOR_EXP_FUNC_S gExpFuncs[VI_MAX_DEV_NUM];
SNS_AHD_OBJ_S gAhdFuncs[VI_MAX_DEV_NUM];

CVI_S32 cvi_sns_getsize(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CVI_S32 s32Ret = CVI_SUCCESS;

	CMOS_CHECK_POINTER(sensor_cfg);

	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;
	SNS_CFG_S *sns_cfg = &sensor_cfg->sns_cfg;

	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case GCORE_GC1054_MIPI_1M_30FPS_10BIT:
	case NEXTCHIP_N5_1M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_30FPS_8BIT:
	case SOI_H65_MIPI_1M_30FPS_10BIT:
	case SONY_IMX290_MIPI_1M_30FPS_12BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT_WDR2TO1:
	case LONTIUM_MIPI_LT6911_1M_60FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 1280;
		sns_cfg->u32ImageHeight[dev_num] = 720;
		break;
	case SMS_SC1330_MIPI_1M_30FPS_10BIT:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_MASTER:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_SLAVE:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_MASTER:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_SLAVE:
		sns_cfg->u32ImageWigth[dev_num] = 1280;
		sns_cfg->u32ImageHeight[dev_num] = 960;
		break;
	case OV_OV9282_MASTER_MIPI_800P_15FPS_2L_10BIT:
	case OV_OV9282_SLAVE_MIPI_800P_15FPS_2L_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 1280;
		sns_cfg->u32ImageHeight[dev_num] = 800;
		break;
	case BOARD_FULL_SIZE_MIPI_30FPS_12BIT:
		sns_cfg->u32ImageWigth[dev_num] = 8192;
		sns_cfg->u32ImageHeight[dev_num] = 4320;
		break;
	case ONSEMI_AR2020_20M_25FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 5120;
		sns_cfg->u32ImageHeight[dev_num] = 3840;
		break;
	case BOARD_MAX_SIZE_MIPI_30FPS_12BIT:
		sns_cfg->u32ImageWigth[dev_num] = 4608;
		sns_cfg->u32ImageHeight[dev_num] = 4320;
		break;
	case GCORE_GC02M1_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2145_MIPI_2M_12FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 1600;
		sns_cfg->u32ImageHeight[dev_num] = 1200;
		break;
	case BRIGATES_BG0808_MIPI_2M_30FPS_10BIT:
	case BRIGATES_BG0808_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case CVSENS_CV2003_1L_SLAVE_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_1L_MASTER_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_HIGH_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_LOW_MIPI_2M_1080P_30FPS_10BIT:
	case GCORE_GC2053_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2053_SLAVE_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2053_1L_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case GCORE_GC2093_SLAVE_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_SLAVE_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case NEXTCHIP_N5_2M_25FPS_8BIT:
	case NEXTCHIP_N6_2M_4CH_25FPS_8BIT:
	case OV_OS02D10_MIPI_2M_30FPS_10BIT:
	case OV_OS02D10_SLAVE_MIPI_2M_30FPS_10BIT:
	case OV_OS02K10_SLAVE_MIPI_2M_30FPS_12BIT:
	case OV_OV2736_MIPI_2M_30FPS_12BIT:
	case OV_OV2736_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case PIXELPLUS_PR2020_2M_25FPS_8BIT:
	case PIXELPLUS_PR2020_2M_30FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_2L_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_25FPS_8BIT:
	case SMS_SC233HGS_MIPI_2M_60FPS_10BIT:
	case SMS_SC233HGS_MIPI_2M_60FPS_10BIT_WDR2TO1:
	case SMS_SC2335_MIPI_2M_30FPS_10BIT:
	case SMS_SC200AI_MIPI_2M_30FPS_10BIT:
	case SMS_SC200AI_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SOI_F23_MIPI_2M_30FPS_10BIT:
	case SOI_F35_MIPI_2M_30FPS_10BIT:
	case SOI_F35_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SOI_F35_SLAVE_MIPI_2M_30FPS_10BIT:
	case SOI_F35_SLAVE_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SOI_F37P_MIPI_2M_30FPS_10BIT:
	case SONY_IMX290_MIPI_2M_60FPS_12BIT:
	case SONY_IMX307_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_2L_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_2L_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_SLAVE_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_SLAVE_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_MIPI_2M_60FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_60FPS_12BIT:
	case SONY_IMX327_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_2L_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_2L_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_SLAVE_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_SLAVE_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_MIPI_2M_60FPS_12BIT:
	case SONY_IMX335_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_2M_60FPS_10BIT:
	case SONY_IMX385_MIPI_2M_30FPS_12BIT:
	case SONY_IMX385_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX415_MIPI_2M_60FPS_12BIT:
	case TECHPOINT_TP2850_MIPI_2M_30FPS_8BIT:
	case VIVO_MCS369_2M_30FPS_12BIT:
	case VIVO_MM308M2_2M_25FPS_8BIT:
	case LONTIUM_MIPI_LT6911_2M_60FPS_8BIT:
	case NUC_NC021_MIPI_2M_50FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 1920;
		sns_cfg->u32ImageHeight[dev_num] = 1080;
		break;
	case GCORE_GC4023_MIPI_4M_30FPS_10BIT:
	case GCORE_GC4653_MIPI_4M_30FPS_10BIT:
	case GCORE_GC4653_SLAVE_MIPI_4M_30FPS_10BIT:
	case OV_OS04A10_MIPI_4M_1440P_30FPS_12BIT:
	case OV_OS04A10_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MIPI_4M_1440P_30FPS_10BIT_WDR2TO1:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04C10_MIPI_4M_1440P_30FPS_12BIT:
	case OV_OS04C10_MIPI_4M_1440P_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_MIPI_4M_30FPS_10BIT:
	case OV_OS08A20_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_SLAVE_MIPI_4M_30FPS_10BIT:
	case OV_OS08A20_SLAVE_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case SMS_SC401AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC500AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC500AI_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case SMS_SC4210_MIPI_4M_30FPS_12BIT:
	case SMS_SC4210_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case SMS_SC4336_MIPI_4M_30FPS_10BIT:
	case SMS_SC4336P_MIPI_4M_30FPS_10BIT:
	case SMS_SC4336P_1L_MIPI_4M_20FPS_10BIT:
	case SMS_SC4336P_SLAVE_MIPI_4M_30FPS_10BIT:
	case SOI_K06_MIPI_4M_25FPS_10BIT:
	case SONY_IMX335_MIPI_4M_30FPS_12BIT:
	case SONY_IMX335_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_2L_MIPI_4M_30FPS_10BIT:
	case SONY_IMX335_MIPI_4M_60FPS_10BIT:
	case SONY_IMX415_MIPI_4M_25FPS_12BIT:
	case TECHPOINT_TP2850_MIPI_4M_30FPS_8BIT:
	case VIVO_MCS369Q_4M_30FPS_12BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_MASTER:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_SLAVE:
		sns_cfg->u32ImageWigth[dev_num] = 2560;
		sns_cfg->u32ImageHeight[dev_num] = 1440;
		break;
	case SMS_SC401AI_MIPI_3M_30FPS_10BIT:
	case SMS_SC3332_MIPI_3M_30FPS_10BIT:
	case SMS_SC3335_MIPI_3M_30FPS_10BIT:
	case SMS_SC3335_SLAVE_MIPI_3M_30FPS_10BIT:
	case SMS_SC3336_MIPI_3M_30FPS_10BIT:
	case SOI_Q03_MIPI_3M_30FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 2304;
		sns_cfg->u32ImageHeight[dev_num] = 1296;
		break;
	case SMS_SC301IOT_MIPI_3M_30FPS_10BIT:
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_COLOR:
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_MONO:
		sns_cfg->u32ImageWigth[dev_num] = 2048;
		sns_cfg->u32ImageHeight[dev_num] = 1536;
		break;
	case OV_OS04E10_MIPI_4M_30FPS_12BIT:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_SALVE_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OS04E10_SLAVE_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
		sns_cfg->u32ImageWigth[dev_num] = 2048;
		sns_cfg->u32ImageHeight[dev_num] = 2048;
		break;
	case SONY_IMX335_MIPI_4M_1600P_30FPS_12BIT:
	case SONY_IMX335_MIPI_4M_1600P_30FPS_10BIT_WDR2TO1:
		sns_cfg->u32ImageWigth[dev_num] = 2560;
		sns_cfg->u32ImageHeight[dev_num] = 1600;
		break;
	case SONY_IMX675_MIPI_5M_30FPS_12BIT:
	case SONY_IMX675_MIPI_5M_25FPS_12BIT_WDR2TO1:
		sns_cfg->u32ImageWigth[dev_num] = 2560;
		sns_cfg->u32ImageHeight[dev_num] = 1944;
		break;
	case SONY_IMX415_MIPI_5M_25FPS_12BIT:
		sns_cfg->u32ImageWigth[dev_num] = 2560;
		sns_cfg->u32ImageHeight[dev_num] = 2160;
		break;
	case OV_OS08A20_MIPI_5M_30FPS_10BIT:
	case OV_OS08A20_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_SLAVE_MIPI_5M_30FPS_10BIT:
	case OV_OS08A20_SLAVE_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_5M_30FPS_12BIT:
	case SONY_IMX335_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_5M_60FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 2592;
		sns_cfg->u32ImageHeight[dev_num] = 1944;
		break;
	case OV_OS04C10_MIPI_4M_30FPS_12BIT:
	case OV_OS04C10_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS04C10_SLAVE_MIPI_4M_30FPS_12BIT:
	case OV_OS04C10_SLAVE_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OV4689_MIPI_4M_30FPS_10BIT:
	case SONY_IMX347_MIPI_4M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX347_MIPI_4M_60FPS_12BIT:
		sns_cfg->u32ImageWigth[dev_num] = 2688;
		sns_cfg->u32ImageHeight[dev_num] = 1520;
		break;
	case OV_OS05A20_MIPI_1944P_15FPS_2L_12BIT:
		sns_cfg->u32ImageWigth[dev_num] = 2688;
		sns_cfg->u32ImageHeight[dev_num] = 1944;
		break;
	case SMS_SC500AI_MIPI_5M_30FPS_10BIT:
	case SMS_SC500AI_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case SMS_SC500AI_MIPI_5M_60FPS_10BIT:
	case SMS_SC501AI_2L_MIPI_5M_30FPS_10BIT:
	case SMS_SC531AI_2L_MIPI_5M_30FPS_10BIT:
	case SMS_SC500AI_2L_MIPI_5M_30FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 2880;
		sns_cfg->u32ImageHeight[dev_num] = 1620;
		break;
	case OV_OS08A20_MIPI_8M_30FPS_10BIT:
	case OV_OS08A20_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_SLAVE_MIPI_8M_30FPS_10BIT:
	case OV_OS08A20_SLAVE_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case OV_OS08B10_MIPI_8M_30FPS_10BIT:
	case OV_OS08B10_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case SMS_SC850SL_MIPI_8M_30FPS_12BIT:
	case SMS_SC850SL_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case SMS_SC8238_MIPI_8M_30FPS_10BIT:
	case SMS_SC8238_MIPI_8M_15FPS_10BIT_WDR2TO1:
	case SONY_IMX334_MIPI_8M_30FPS_12BIT:
	case SONY_IMX585_MIPI_8M_30FPS_12BIT:
	case SONY_IMX334_MIPI_8M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX585_MIPI_8M_25FPS_12BIT_WDR2TO1:
	case LONTIUM_MIPI_LT6911_8M_60FPS_8BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_25FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case GCORE_GC8613_MIPI_8M_60FPS_10BIT:
	case SONY_IMX415_MIPI_8M_25FPS_12BIT:
	case SONY_IMX415_MIPI_8M_30FPS_10BIT:
	case SONY_IMX678_MIPI_8M_30FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 3840;
		sns_cfg->u32ImageHeight[dev_num] = 2160;
		break;
	case SMS_SC635AI_MIPI_6M_60FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 3200;
		sns_cfg->u32ImageHeight[dev_num] = 1800;
		break;
	case SONY_IMX412_MIPI_12M_30FPS_12BIT:
	case SONY_IMX412_MIPI_12M_30FPS_12BIT_WDR2TO1:
		sns_cfg->u32ImageWigth[dev_num] = 4032;
		sns_cfg->u32ImageHeight[dev_num] = 3000;
		break;
	case SONY_IMX412_MIPI_8M_30FPS_12BIT_WDR2TO1:
		sns_cfg->u32ImageWigth[dev_num] = 4032;
		sns_cfg->u32ImageHeight[dev_num] = 2288;
		break;
	case OV_OV7251_MIPI_480P_120FPS_10BIT:
	case SMS_SC035GS_MIPI_480P_120FPS_12BIT:
	case SMS_SC035GS_1L_MIPI_480P_120FPS_10BIT:
	case SMS_SC035HGS_MIPI_480P_120FPS_12BIT:
		sns_cfg->u32ImageWigth[dev_num] = 640;
		sns_cfg->u32ImageHeight[dev_num] = 480;
		break;
	case PICO640_THERMAL_479P:
		sns_cfg->u32ImageWigth[dev_num] = 632;
		sns_cfg->u32ImageHeight[dev_num] = 479;
		break;
	case OV_OV6211_MIPI_400P_120FPS_10BIT:
	case SMS_SC020HGS_MIPI_400P_120FPS_10BIT:
		sns_cfg->u32ImageWigth[dev_num] = 400;
		sns_cfg->u32ImageHeight[dev_num] = 400;
		break;
	case PICO384_THERMAL_384X288:
		sns_cfg->u32ImageWigth[dev_num] = 384;
		sns_cfg->u32ImageHeight[dev_num] = 288;
		break;
#ifdef ARCH_CV183X
	case PIXELPLUS_PR2100_2M_2CH_25FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 3844;
		sns_cfg->u32ImageHeight[dev_num] = 1124;
		break;
	case PIXELPLUS_PR2100_2M_4CH_25FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 7688;
		sns_cfg->u32ImageHeight[dev_num] = 1124;
		break;
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 7688;
		sns_cfg->u32ImageHeight[dev_num] = 1124;
		break;
#else
	case PIXELPLUS_PR2100_2M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
	case TECHPOINT_TP2860_MIPI_2M_25FPS_8BIT:
		sns_cfg->u32ImageWigth[dev_num] = 1920;
		sns_cfg->u32ImageHeight[dev_num] = 1080;
		break;
#endif
	default:
		s32Ret = CVI_FAILURE;
		break;
	}
	return s32Ret;
}

static CVI_S32 cvi_sns_getbayerformat(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CVI_S32 s32Ret = CVI_SUCCESS;

	CMOS_CHECK_POINTER(sensor_cfg);

	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;
	SNS_CFG_S *sns_cfg = &sensor_cfg->sns_cfg;

	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case SOI_K06_MIPI_4M_25FPS_10BIT:
	case SONY_IMX415_MIPI_2M_60FPS_12BIT:
	case SONY_IMX415_MIPI_4M_25FPS_12BIT:
	case SONY_IMX415_MIPI_5M_25FPS_12BIT:
	case SONY_IMX415_MIPI_8M_25FPS_12BIT:
	case SONY_IMX415_MIPI_8M_30FPS_10BIT:
		sns_cfg->enBayerFormat[dev_num] = BAYER_FORMAT_GB;
		break;
	case OV_OV2736_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case OV_OV2736_MIPI_2M_30FPS_12BIT:
		sns_cfg->enBayerFormat[dev_num] = BAYER_FORMAT_BGRGI;
		break;
	//Sony
	case BOARD_FULL_SIZE_MIPI_30FPS_12BIT:
	case BOARD_MAX_SIZE_MIPI_30FPS_12BIT:
	case SONY_IMX307_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_SLAVE_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_SLAVE_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_2L_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_2L_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_MIPI_2M_60FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_60FPS_12BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX327_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_SLAVE_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_SLAVE_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_2L_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_2L_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX327_MIPI_2M_60FPS_12BIT:
	case SONY_IMX334_MIPI_8M_30FPS_12BIT:
	case SONY_IMX334_MIPI_8M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX335_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_4M_30FPS_12BIT:
	case SONY_IMX335_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_2L_MIPI_4M_30FPS_10BIT:
	case SONY_IMX335_MIPI_4M_1600P_30FPS_12BIT:
	case SONY_IMX335_MIPI_4M_1600P_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_5M_30FPS_12BIT:
	case SONY_IMX335_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_2M_60FPS_10BIT:
	case SONY_IMX335_MIPI_4M_60FPS_10BIT:
	case SONY_IMX335_MIPI_5M_60FPS_10BIT:
	case SONY_IMX347_MIPI_4M_60FPS_12BIT:
	case SONY_IMX347_MIPI_4M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX385_MIPI_2M_30FPS_12BIT:
	case SONY_IMX385_MIPI_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX412_MIPI_12M_30FPS_12BIT:
	case SONY_IMX412_MIPI_12M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX412_MIPI_8M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX585_MIPI_8M_30FPS_12BIT:
	case SONY_IMX585_MIPI_8M_25FPS_12BIT_WDR2TO1:
	case SONY_IMX675_MIPI_5M_30FPS_12BIT:
	case SONY_IMX675_MIPI_5M_25FPS_12BIT_WDR2TO1:
	case SONY_IMX678_MIPI_8M_30FPS_10BIT:
	//GalaxyCore
	case GCORE_GC02M1_MIPI_2M_30FPS_10BIT:
	case GCORE_GC1054_MIPI_1M_30FPS_10BIT:
	case GCORE_GC2053_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2053_SLAVE_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2053_1L_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case GCORE_GC2093_SLAVE_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_SLAVE_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case GCORE_GC4023_MIPI_4M_30FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_25FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case GCORE_GC8613_MIPI_8M_60FPS_10BIT:
	//CVSens
	case CVSENS_CV2003_1L_SLAVE_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_1L_MASTER_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_HIGH_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_LOW_MIPI_2M_1080P_30FPS_10BIT:
		sns_cfg->enBayerFormat[dev_num] = BAYER_FORMAT_RG;
		break;
	case BRIGATES_BG0808_MIPI_2M_30FPS_10BIT:
	case BRIGATES_BG0808_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SMS_SC4336_MIPI_4M_30FPS_10BIT:
	case GCORE_GC4653_MIPI_4M_30FPS_10BIT:
	case GCORE_GC4653_SLAVE_MIPI_4M_30FPS_10BIT:
	case TECHPOINT_TP2850_MIPI_2M_30FPS_8BIT:
	case TECHPOINT_TP2850_MIPI_4M_30FPS_8BIT:
	case ONSEMI_AR2020_20M_25FPS_10BIT:
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_COLOR:
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_MONO:
		sns_cfg->enBayerFormat[dev_num] = BAYER_FORMAT_GR;
		break;
	default:
		sns_cfg->enBayerFormat[dev_num] = BAYER_FORMAT_BG;
		break;
	};

	return s32Ret;
}

CVI_S32 cvi_sns_getdevattr(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CMOS_CHECK_POINTER(sensor_cfg);

	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;
	SNS_CFG_S *sns_cfg = &sensor_cfg->sns_cfg;
	//WDR mode
	if (sns_ini_cfg->enSnsType[dev_num] & 0x00000080)
		sns_cfg->enWDRMode[dev_num] = WDR_MODE_2To1_LINE;
	else
		sns_cfg->enWDRMode[dev_num] = WDR_MODE_NONE;

	//YUV Sensor
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case NEXTCHIP_N5_1M_2CH_25FPS_8BIT:
	case NEXTCHIP_N5_2M_25FPS_8BIT:
	case NEXTCHIP_N6_2M_4CH_25FPS_8BIT:
	case PICO384_THERMAL_384X288:
	case PICO640_THERMAL_479P:
	case PIXELPLUS_PR2020_1M_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_30FPS_8BIT:
	case PIXELPLUS_PR2020_2M_25FPS_8BIT:
	case PIXELPLUS_PR2020_2M_30FPS_8BIT:
	case PIXELPLUS_PR2100_2M_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_2L_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
	case VIVO_MCS369_2M_30FPS_12BIT:
	case VIVO_MCS369Q_4M_30FPS_12BIT:
	case VIVO_MM308M2_2M_25FPS_8BIT:
		sns_cfg->enYuvFormat[dev_num] = SNS_DATA_SEQ_YUYV;
		sns_cfg->enFormatMode[dev_num] = SNS_DATA_TYPE_YUV;
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_MIPI_YUV422;
		break;
	case GCORE_GC2145_MIPI_2M_12FPS_8BIT:
		sns_cfg->enYuvFormat[dev_num] = SNS_DATA_SEQ_YUYV;
		sns_cfg->enFormatMode[dev_num] = SNS_DATA_TYPE_YUV;
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_BT601;
		break;
	case LONTIUM_MIPI_LT6911_1M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_2M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_8M_60FPS_8BIT:
		sns_cfg->enYuvFormat[dev_num] = SNS_DATA_SEQ_UYVY;
		sns_cfg->enFormatMode[dev_num] = SNS_DATA_TYPE_YUV;
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_MIPI_YUV422;
		break;
	default:
		sns_cfg->enFormatMode[dev_num] = SNS_DATA_TYPE_RGB;
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_MIPI;
		break;
	};

	//BT601
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case GCORE_GC2145_MIPI_2M_12FPS_8BIT:
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_BT601;
		break;
	default:
		break;
	};

	//BT656
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case NEXTCHIP_N5_1M_2CH_25FPS_8BIT:
	case NEXTCHIP_N5_2M_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_30FPS_8BIT:
	case PIXELPLUS_PR2020_2M_25FPS_8BIT:
	case PIXELPLUS_PR2020_2M_30FPS_8BIT:
	case TECHPOINT_TP2860_MIPI_2M_25FPS_8BIT:
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_BT656;
		break;
	default:
		break;
	};

	//BT1120
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case VIVO_MCS369_2M_30FPS_12BIT:
	case VIVO_MCS369Q_4M_30FPS_12BIT:
	case VIVO_MM308M2_2M_25FPS_8BIT:
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_BT1120_STANDARD;
		break;
	default:
		break;
	};

	//subLVDS
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX307_SUBLVDS_2M_60FPS_12BIT:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
		sns_cfg->enInterFaceMode[dev_num] = SNS_MODE_LVDS;
		break;
	default:
		break;
	};

	if (cvi_sns_getbayerformat(dev_num, sensor_cfg) != CVI_SUCCESS) {
		SNS_DBG_PRT("Get sns_%d Bayer format failed!\n", dev_num);
		return CVI_FAILURE;
	}

	//virtual channel for multi-ch
#ifndef ARCH_CV183X
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case PIXELPLUS_PR2100_2M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_2L_25FPS_8BIT:
	case NEXTCHIP_N5_1M_2CH_25FPS_8BIT:
		sns_cfg->enChnMode[dev_num] = SNS_CHN_MODE_2Multiplex;
		break;
	case PIXELPLUS_PR2100_2M_4CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
		sns_cfg->enChnMode[dev_num] = SNS_CHN_MODE_4Multiplex;
		break;
	default:
		sns_cfg->enChnMode[dev_num] = SNS_CHN_MODE_1Multiplex;
		break;
	}
#endif

	return CVI_SUCCESS;
}

CVI_S32 cvi_sns_getyuvbypass(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CVI_S32 s32Ret = CVI_SUCCESS;
	CMOS_CHECK_POINTER(sensor_cfg);

	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;
	SNS_CFG_S *sns_cfg = &sensor_cfg->sns_cfg;

	//Set YUV sensor need bypass isp
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case GCORE_GC2145_MIPI_2M_12FPS_8BIT:
	case PICO640_THERMAL_479P:
	case TECHPOINT_TP2850_MIPI_2M_30FPS_8BIT:
	case TECHPOINT_TP2850_MIPI_4M_30FPS_8BIT:
	case TECHPOINT_TP2860_MIPI_2M_25FPS_8BIT:
	case VIVO_MCS369Q_4M_30FPS_12BIT:
	case VIVO_MCS369_2M_30FPS_12BIT:
	case VIVO_MM308M2_2M_25FPS_8BIT:
	case NEXTCHIP_N5_2M_25FPS_8BIT:
	case NEXTCHIP_N5_1M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_30FPS_8BIT:
	case PIXELPLUS_PR2020_2M_25FPS_8BIT:
	case PIXELPLUS_PR2020_2M_30FPS_8BIT:
	case PIXELPLUS_PR2100_2M_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_2L_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
	case LONTIUM_MIPI_LT6911_1M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_2M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_8M_60FPS_8BIT:
		sns_cfg->bBypassIsp[dev_num] = 1;
		break;
	default:
		sns_cfg->bBypassIsp[dev_num] = 0;
		break;
	}
	return s32Ret;
}

CVI_S32 cvi_sns_getispattr(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CMOS_CHECK_POINTER(sensor_cfg);

	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;
	SNS_CFG_S *sns_cfg = &sensor_cfg->sns_cfg;

	if (sns_ini_cfg->enSnsType[dev_num] & 0x00000080)
		sns_cfg->enWDRMode[dev_num] = WDR_MODE_2To1_LINE;

	//FPS
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case SMS_SC020HGS_MIPI_400P_120FPS_10BIT:
	case SMS_SC035GS_MIPI_480P_120FPS_12BIT:
	case SMS_SC035GS_1L_MIPI_480P_120FPS_10BIT:
	case SMS_SC035HGS_MIPI_480P_120FPS_12BIT:
	case OV_OV6211_MIPI_400P_120FPS_10BIT:
	case OV_OV7251_MIPI_480P_120FPS_10BIT:
		sns_cfg->f32FrameRate[dev_num] = 120;
		break;
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_COLOR:
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_MONO:
		sns_cfg->f32FrameRate[dev_num] = 70;
		break;
	case SONY_IMX307_MIPI_2M_60FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_60FPS_12BIT:
	case SONY_IMX327_MIPI_2M_60FPS_12BIT:
	case SONY_IMX335_MIPI_2M_60FPS_10BIT:
	case SONY_IMX335_MIPI_4M_60FPS_10BIT:
	case SONY_IMX335_MIPI_5M_60FPS_10BIT:
	case SONY_IMX347_MIPI_4M_60FPS_12BIT:
	case SONY_IMX415_MIPI_2M_60FPS_12BIT:
	case LONTIUM_MIPI_LT6911_1M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_2M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_8M_60FPS_8BIT:
	case GCORE_GC8613_MIPI_8M_60FPS_10BIT:
	case SMS_SC500AI_MIPI_5M_60FPS_10BIT:
	case SMS_SC233HGS_MIPI_2M_60FPS_10BIT:
	case SMS_SC233HGS_MIPI_2M_60FPS_10BIT_WDR2TO1:
	case SMS_SC635AI_MIPI_6M_60FPS_10BIT:
		sns_cfg->f32FrameRate[dev_num] = 60;
		break;
	case NUC_NC021_MIPI_2M_50FPS_8BIT:
		sns_cfg->f32FrameRate[dev_num] = 50;
		break;
	case CVSENS_CV2003_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_HIGH_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_LOW_MIPI_2M_1080P_30FPS_10BIT:
	case TECHPOINT_TP2850_MIPI_2M_30FPS_8BIT:
	case TECHPOINT_TP2850_MIPI_4M_30FPS_8BIT:
	case SONY_IMX335_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX347_MIPI_4M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX585_MIPI_8M_30FPS_12BIT:
	case OV_OS04A10_MIPI_4M_1440P_30FPS_12BIT:
	case SONY_IMX412_MIPI_12M_30FPS_12BIT:
	case SONY_IMX412_MIPI_12M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX412_MIPI_8M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX415_MIPI_8M_30FPS_10BIT:
	case SONY_IMX675_MIPI_5M_30FPS_12BIT:
	case SONY_IMX678_MIPI_8M_30FPS_10BIT:
	case OV_OS08B10_MIPI_8M_30FPS_10BIT:
	case OV_OS08B10_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_MASTER:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_SLAVE:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_MASTER:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_SLAVE:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_MASTER:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_SLAVE:
		sns_cfg->f32FrameRate[dev_num] = 30;
		break;
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OS04E10_SLAVE_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case SMS_SC4336P_1L_MIPI_4M_20FPS_10BIT:
		sns_cfg->f32FrameRate[dev_num] = 20;
		break;
	case GCORE_GC2145_MIPI_2M_12FPS_8BIT:
		sns_cfg->f32FrameRate[dev_num] = 12;
		break;
	case SONY_IMX327_MIPI_1M_30FPS_10BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT_WDR2TO1:
		sns_cfg->f32FrameRate[dev_num] = 10;
		break;
	case CVSENS_CV2003_1L_SLAVE_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_1L_MASTER_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case OV_OV9282_MASTER_MIPI_800P_15FPS_2L_10BIT:
	case OV_OV9282_SLAVE_MIPI_800P_15FPS_2L_10BIT:
	case OV_OS05A20_MIPI_1944P_15FPS_2L_12BIT:
		sns_cfg->f32FrameRate[dev_num] = 15;
		break;
	default:
		sns_cfg->f32FrameRate[dev_num] = 25;
		break;
	}

	//Lane num
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case CVSENS_CV2003_1L_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_HIGH_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_LOW_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_1L_MASTER_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_MASTER:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_SLAVE:
	case SMS_SC4336P_1L_MIPI_4M_20FPS_10BIT:
		sns_cfg->u8LaneNumber[dev_num] = 1;
		break;
	case CVSENS_CV2003_MIPI_2M_1080P_30FPS_10BIT:
	case OV_OS04A10_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_SALVE_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OS04E10_SLAVE_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OS05A20_MIPI_1944P_15FPS_2L_12BIT:
	case OV_OV9282_MASTER_MIPI_800P_15FPS_2L_10BIT:
	case OV_OV9282_SLAVE_MIPI_800P_15FPS_2L_10BIT:
	case PIXELPLUS_PR2100_2M_2CH_2L_25FPS_8BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_SLAVE:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_MASTER:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC500AI_2L_MIPI_5M_30FPS_10BIT:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_MASTER:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_SLAVE:
		sns_cfg->u8LaneNumber[dev_num] = 2;
		break;
	default:
		sns_cfg->u8LaneNumber[dev_num] = 4;
		break;
	}

	//enable master : 1 slave : 0
	switch (sns_ini_cfg->enSnsType[dev_num]) {
	case CVSENS_CV2003_1L_SLAVE_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04E10_SALVE_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_SLAVE_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OV9282_SLAVE_MIPI_800P_15FPS_2L_10BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_SLAVE:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_SLAVE:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_SLAVE:
	case SMS_SC4336P_SLAVE_MIPI_4M_30FPS_10BIT:
		sns_cfg->u8EnMasterMode[dev_num] = ISP_SNS_SLAVE_BY_FSYNC;
		break;
	case CVSENS_CV2003_1L_MASTER_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OV9282_MASTER_MIPI_800P_15FPS_2L_10BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_MASTER:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_MASTER:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_MASTER:
		sns_cfg->u8EnMasterMode[dev_num] = ISP_SNS_MASTER_BY_FSYNC;
		break;
	case CVSENS_CV2003_1L_SLAVE_HIGH_MIPI_2M_1080P_30FPS_10BIT:
		sns_cfg->u8EnMasterMode[dev_num] = ISP_SNS_SLAVE_BY_HIGH_ACTIVE;
		break;
	case CVSENS_CV2003_1L_SLAVE_LOW_MIPI_2M_1080P_30FPS_10BIT:
		sns_cfg->u8EnMasterMode[dev_num] = ISP_SNS_SLAVE_BY_LOW_ACTIVE;
		break;
	default:
		sns_cfg->u8EnMasterMode[dev_num] = ISP_SNS_NORMAL_MODE;
		break;
	}

	if (cvi_sns_getbayerformat(dev_num, sensor_cfg) != CVI_SUCCESS) {
		SNS_DBG_PRT("Get sns_%d Bayer format failed!\n", dev_num);
		return CVI_FAILURE;
	}

	return CVI_SUCCESS;
}

CVI_S32 cvi_sns_getsnsobj(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CMOS_CHECK_POINTER(sensor_cfg);

	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;
	SNS_CFG_S *sns_cfg = &sensor_cfg->sns_cfg;

	ISP_SNS_OBJ_S *pSnsObj;

	switch (sns_ini_cfg->enSnsType[dev_num]) {
#if defined(CONFIG_SENSOR_BRIGATES_BG0808)
	case BRIGATES_BG0808_MIPI_2M_30FPS_10BIT:
	case BRIGATES_BG0808_MIPI_2M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsBG0808_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_CVSENS_CV2003)
	case CVSENS_CV2003_1L_SLAVE_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_1L_MASTER_SWITCH_MIPI_2M_1080P_15FPS_10BIT:
	case CVSENS_CV2003_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_HIGH_MIPI_2M_1080P_30FPS_10BIT:
	case CVSENS_CV2003_1L_SLAVE_LOW_MIPI_2M_1080P_30FPS_10BIT:
		pSnsObj = &stSnsCV2003_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC02M1)
	case GCORE_GC02M1_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsGc02m1_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC1054)
	case GCORE_GC1054_MIPI_1M_30FPS_10BIT:
		pSnsObj = &stSnsGc1054_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC2053)
	case GCORE_GC2053_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsGc2053_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC2053_SLAVE)
	case GCORE_GC2053_SLAVE_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsGc2053_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC2053_1L)
	case GCORE_GC2053_1L_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsGc2053_1l_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC2093)
	case GCORE_GC2093_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_MIPI_2M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsGc2093_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC2093_SLAVE)
	case GCORE_GC2093_SLAVE_MIPI_2M_30FPS_10BIT:
	case GCORE_GC2093_SLAVE_MIPI_2M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsGc2093_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC2145)
	case GCORE_GC2145_MIPI_2M_12FPS_8BIT:
		pSnsObj = &stSnsGc2145_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC4023)
	case GCORE_GC4023_MIPI_4M_30FPS_10BIT:
		pSnsObj = &stSnsGc4023_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC4653)
	case GCORE_GC4653_MIPI_4M_30FPS_10BIT:
		pSnsObj = &stSnsGc4653_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC4653_SLAVE)
	case GCORE_GC4653_SLAVE_MIPI_4M_30FPS_10BIT:
		pSnsObj = &stSnsGc4653_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_GCORE_GC8613)
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_25FPS_10BIT:
	case GCORE_GC8613_MIPI_8M_30FPS_10BIT_WDR2TO1:
	case GCORE_GC8613_MIPI_8M_60FPS_10BIT:
		pSnsObj = &stSnsGc8613_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_NEXTCHIP_N5)
	case NEXTCHIP_N5_2M_25FPS_8BIT:
	case NEXTCHIP_N5_1M_2CH_25FPS_8BIT:
		pSnsObj = &stSnsN5_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_NEXTCHIP_N6)
	case NEXTCHIP_N6_2M_4CH_25FPS_8BIT:
		pSnsObj = &stSnsN6_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_ONSEMI_AR2020)
	case ONSEMI_AR2020_20M_25FPS_10BIT:
		pSnsObj = &stSnsAR2020_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS02D10)
	case OV_OS02D10_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsOs02d10_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS02D10_SLAVE)
	case OV_OS02D10_SLAVE_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsOs02d10_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS02K10_SLAVE)
	case OV_OS02K10_SLAVE_MIPI_2M_30FPS_12BIT:
		pSnsObj = &stSnsOs02k10_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS04A10)
	case OV_OS04A10_MIPI_4M_1440P_30FPS_12BIT:
	case OV_OS04A10_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MIPI_4M_1440P_30FPS_10BIT_WDR2TO1:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT:
	case OV_OS04A10_MASTER_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
	case OV_OS04A10_SLAVE_MIPI_4M_1440P_2L_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs04a10_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS04C10)
	case OV_OS04C10_MIPI_4M_30FPS_12BIT:
	case OV_OS04C10_MIPI_4M_1440P_30FPS_12BIT:
	case OV_OS04C10_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS04C10_MIPI_4M_1440P_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs04c10_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS04C10_SLAVE)
	case OV_OS04C10_SLAVE_MIPI_4M_30FPS_12BIT:
	case OV_OS04C10_SLAVE_MIPI_4M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs04c10_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS04E10)
	case OV_OS04E10_MIPI_4M_30FPS_12BIT:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_SALVE_MIPI_4M_30FPS_2L_10BIT:
	case OV_OS04E10_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS04E10_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
	case OV_OS04E10_SLAVE_MIPI_4M_30FPS_2L_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs04e10_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS05A20)
	case OV_OS05A20_MIPI_1944P_15FPS_2L_12BIT:
		pSnsObj = &stSnsOs05a20_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS08A20)
	case OV_OS08A20_MIPI_4M_30FPS_10BIT:
	case OV_OS08A20_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_MIPI_5M_30FPS_10BIT:
	case OV_OS08A20_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_MIPI_8M_30FPS_10BIT:
	case OV_OS08A20_MIPI_8M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs08a20_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS08A20_SLAVE)
	case OV_OS08A20_SLAVE_MIPI_4M_30FPS_10BIT:
	case OV_OS08A20_SLAVE_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_SLAVE_MIPI_5M_30FPS_10BIT:
	case OV_OS08A20_SLAVE_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case OV_OS08A20_SLAVE_MIPI_8M_30FPS_10BIT:
	case OV_OS08A20_SLAVE_MIPI_8M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs08a20_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OS08B10)
	case OV_OS08B10_MIPI_8M_30FPS_10BIT:
	case OV_OS08B10_MIPI_8M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsOs08b10_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OV4689)
	case OV_OV4689_MIPI_4M_30FPS_10BIT:
		pSnsObj = &stSnsOv4689_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OV6211)
	case OV_OV6211_MIPI_400P_120FPS_10BIT:
		pSnsObj = &stSnsOv6211_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OV7251)
	case OV_OV7251_MIPI_480P_120FPS_10BIT:
		pSnsObj = &stSnsOv7251_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OV9282)
	case OV_OV9282_MASTER_MIPI_800P_15FPS_2L_10BIT:
	case OV_OV9282_SLAVE_MIPI_800P_15FPS_2L_10BIT:
		pSnsObj = &stSnsOv9282_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_OV_OV2736)
	case OV_OV2736_MIPI_2M_30FPS_12BIT:
	case OV_OV2736_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsOv2736_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_PICO_384)
	case PICO384_THERMAL_384X288:
		pSnsObj = &stSnsPICO384_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_PICO_640)
	case PICO640_THERMAL_479P:
		pSnsObj = &stSnsPICO640_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_PIXELPLUS_PR2020)
	case PIXELPLUS_PR2020_1M_25FPS_8BIT:
	case PIXELPLUS_PR2020_1M_30FPS_8BIT:
	case PIXELPLUS_PR2020_2M_25FPS_8BIT:
	case PIXELPLUS_PR2020_2M_30FPS_8BIT:
		pSnsObj = &stSnsPR2020_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_PIXELPLUS_PR2100)
	case PIXELPLUS_PR2100_2M_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_2CH_2L_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_25FPS_8BIT:
	case PIXELPLUS_PR2100_2M_4CH_30FPS_8BIT:
		pSnsObj = &stSnsPR2100_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC020HGS)
	case SMS_SC020HGS_MIPI_400P_120FPS_10BIT:
		pSnsObj = &stSnsSC020HGS_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC035GS)
	case SMS_SC035GS_MIPI_480P_120FPS_12BIT:
		pSnsObj = &stSnsSC035GS_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC035GS_1L)
	case SMS_SC035GS_1L_MIPI_480P_120FPS_10BIT:
		pSnsObj = &stSnsSC035GS_1L_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC035HGS)
	case SMS_SC035HGS_MIPI_480P_120FPS_12BIT:
		pSnsObj = &stSnsSC035HGS_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC200AI)
	case SMS_SC200AI_MIPI_2M_30FPS_10BIT:
	case SMS_SC200AI_MIPI_2M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsSC200AI_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC233HGS)
	case SMS_SC233HGS_MIPI_2M_60FPS_10BIT:
	case SMS_SC233HGS_MIPI_2M_60FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsSC233HGS_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC301IOT)
	case SMS_SC301IOT_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsSC301IOT_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC401AI)
	case SMS_SC401AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC401AI_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsSC401AI_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC438AI)
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_MASTER:
	case SMS_SC438AI_MIPI_4M_30FPS_10BIT_SLAVE:
		pSnsObj = &stSnsSC438AI_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC500AI)
	case SMS_SC500AI_MIPI_5M_30FPS_10BIT:
	case SMS_SC500AI_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case SMS_SC500AI_MIPI_5M_60FPS_10BIT:
	case SMS_SC500AI_2L_MIPI_5M_30FPS_10BIT:
	case SMS_SC500AI_MIPI_4M_30FPS_10BIT:
	case SMS_SC500AI_MIPI_4M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsSC500AI_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC501AI_2L)
	case SMS_SC501AI_2L_MIPI_5M_30FPS_10BIT:
		pSnsObj = &stSnsSC501AI_2L_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC531AI_2L)
	case SMS_SC531AI_2L_MIPI_5M_30FPS_10BIT:
		pSnsObj = &stSnsSC531AI_2L_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC635AI)
	case SMS_SC635AI_MIPI_6M_60FPS_10BIT:
		pSnsObj = &stSnsSC635AI_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC850SL)
	case SMS_SC850SL_MIPI_8M_30FPS_12BIT:
	case SMS_SC850SL_MIPI_8M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsSC850SL_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC1330)
	case SMS_SC1330_MIPI_1M_30FPS_10BIT:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_MASTER:
	case SMS_SC1330_MIPI_1M_30FPS_10BIT_SLAVE:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_MASTER:
	case SMS_SC1330_1L_MIPI_1M_30FPS_12BIT_SLAVE:
		pSnsObj = &stSnsSC1330_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC3332)
	case SMS_SC3332_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsSC3332_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC3335)
	case SMS_SC3335_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsSC3335_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC3335_SLAVE)
	case SMS_SC3335_SLAVE_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsSC3335_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC3336)
	case SMS_SC3336_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsSC3336_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC2335)
	case SMS_SC2335_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsSC2335_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC4210)
	case SMS_SC4210_MIPI_4M_30FPS_12BIT:
	case SMS_SC4210_MIPI_4M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsSC4210_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC4336)
	case SMS_SC4336_MIPI_4M_30FPS_10BIT:
		pSnsObj = &stSnsSC4336_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC4336P)
	case SMS_SC4336P_MIPI_4M_30FPS_10BIT:
	case SMS_SC4336P_1L_MIPI_4M_20FPS_10BIT:
	case SMS_SC4336P_SLAVE_MIPI_4M_30FPS_10BIT:
		pSnsObj = &stSnsSC4336P_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SMS_SC8238)
	case SMS_SC8238_MIPI_8M_30FPS_10BIT:
	case SMS_SC8238_MIPI_8M_15FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsSC8238_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_F23)
	case SOI_F23_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsF23_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_F35)
	case SOI_F35_MIPI_2M_30FPS_10BIT:
	case SOI_F35_MIPI_2M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsF35_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_F35_SLAVE)
	case SOI_F35_SLAVE_MIPI_2M_30FPS_10BIT:
	case SOI_F35_SLAVE_MIPI_2M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsF35_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_F37P)
	case SOI_F37P_MIPI_2M_30FPS_10BIT:
		pSnsObj = &stSnsF37P_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_H65)
	case SOI_H65_MIPI_1M_30FPS_10BIT:
		pSnsObj = &stSnsH65_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_K06)
	case SOI_K06_MIPI_4M_25FPS_10BIT:
		pSnsObj = &stSnsK06_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SOI_Q03)
	case SOI_Q03_MIPI_3M_30FPS_10BIT:
		pSnsObj = &stSnsQ03_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX290_2L)
	case SONY_IMX290_MIPI_1M_30FPS_12BIT:
	case SONY_IMX290_MIPI_2M_60FPS_12BIT:
		pSnsObj = &stSnsImx290_2l_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX307)
	case SONY_IMX307_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_MIPI_2M_60FPS_12BIT:
	case SONY_IMX307_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx307_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX307_SLAVE)
	case SONY_IMX307_SLAVE_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_SLAVE_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx307_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX307_2L)
	case SONY_IMX307_2L_MIPI_2M_30FPS_12BIT:
	case SONY_IMX307_2L_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx307_2l_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX307_SUBLVDS)
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_60FPS_12BIT:
	case SONY_IMX307_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx307_Sublvds_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX327)
	case SONY_IMX327_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_MIPI_2M_60FPS_12BIT:
	case SONY_IMX327_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx327_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX327_SLAVE)
	case SONY_IMX327_SLAVE_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_SLAVE_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx327_Slave_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX327_2L)
	case SONY_IMX327_2L_MIPI_2M_30FPS_12BIT:
	case SONY_IMX327_2L_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx327_2l_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX327_FPGA)
	case BOARD_FULL_SIZE_MIPI_30FPS_12BIT:
	case BOARD_MAX_SIZE_MIPI_30FPS_12BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT:
	case SONY_IMX327_MIPI_1M_30FPS_10BIT_WDR2TO1:
		pSnsObj = &stSnsImx327_fpga_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX327_SUBLVDS)
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT:
	case SONY_IMX327_SUBLVDS_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx327_Sublvds_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX334)
	case SONY_IMX334_MIPI_8M_30FPS_12BIT:
	case SONY_IMX334_MIPI_8M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx334_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX335)
	case SONY_IMX335_MIPI_2M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_4M_30FPS_12BIT:
	case SONY_IMX335_MIPI_4M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_2L_MIPI_4M_30FPS_10BIT:
	case SONY_IMX335_MIPI_4M_1600P_30FPS_12BIT:
	case SONY_IMX335_MIPI_4M_1600P_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_5M_30FPS_12BIT:
	case SONY_IMX335_MIPI_5M_30FPS_10BIT_WDR2TO1:
	case SONY_IMX335_MIPI_2M_60FPS_10BIT:
	case SONY_IMX335_MIPI_4M_60FPS_10BIT:
	case SONY_IMX335_MIPI_5M_60FPS_10BIT:
		pSnsObj = &stSnsImx335_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX347)
	case SONY_IMX347_MIPI_4M_60FPS_12BIT:
	case SONY_IMX347_MIPI_4M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx347_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX385)
	case SONY_IMX385_MIPI_2M_30FPS_12BIT:
	case SONY_IMX385_MIPI_2M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx385_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX412)
	case SONY_IMX412_MIPI_12M_30FPS_12BIT:
	case SONY_IMX412_MIPI_12M_30FPS_12BIT_WDR2TO1:
	case SONY_IMX412_MIPI_8M_30FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx412_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX415)
	case SONY_IMX415_MIPI_2M_60FPS_12BIT:
	case SONY_IMX415_MIPI_4M_25FPS_12BIT:
	case SONY_IMX415_MIPI_5M_25FPS_12BIT:
	case SONY_IMX415_MIPI_8M_25FPS_12BIT:
	case SONY_IMX415_MIPI_8M_30FPS_10BIT:
		pSnsObj = &stSnsImx415_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX585)
	case SONY_IMX585_MIPI_8M_30FPS_12BIT:
	case SONY_IMX585_MIPI_8M_25FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx585_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX675)
	case SONY_IMX675_MIPI_5M_30FPS_12BIT:
	case SONY_IMX675_MIPI_5M_25FPS_12BIT_WDR2TO1:
		pSnsObj = &stSnsImx675_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX678)
	case SONY_IMX678_MIPI_8M_30FPS_10BIT:
		pSnsObj = &stSnsImx678_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_SONY_IMX900)
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_COLOR:
	case SONY_IMX900_MIPI_3M_70FPS_12BIT_MONO:
		pSnsObj = &stSnsImx900_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_TECHPOINT_TP2850)
	case TECHPOINT_TP2850_MIPI_2M_30FPS_8BIT:
	case TECHPOINT_TP2850_MIPI_4M_30FPS_8BIT:
		pSnsObj = &stSnsTP2850_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_TECHPOINT_TP2860)
	case TECHPOINT_TP2860_MIPI_2M_25FPS_8BIT:
		pSnsObj = &stSnsTP2860_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_VIVO_MCS369)
	case VIVO_MCS369_2M_30FPS_12BIT:
		pSnsObj = &stSnsMCS369_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_VIVO_MCS369Q)
	case VIVO_MCS369Q_4M_30FPS_12BIT:
		pSnsObj = &stSnsMCS369Q_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_VIVO_MM308M2)
	case VIVO_MM308M2_2M_25FPS_8BIT:
		pSnsObj = &stSnsMM308M2_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_LONTIUM_LT6911)
	case LONTIUM_MIPI_LT6911_1M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_2M_60FPS_8BIT:
	case LONTIUM_MIPI_LT6911_8M_60FPS_8BIT:
		pSnsObj = &stSnsLT6911_Obj;
		break;
#endif
#if defined(CONFIG_SENSOR_NUC_NC021)
	case NUC_NC021_MIPI_2M_50FPS_8BIT:
		pSnsObj = &stSnsNC021_Obj;
		break;
#endif
	default:
		pSnsObj = CVI_NULL;
		SNS_DBG_PRT("get SnsObj failed !! check menuconfig select!\n");
		break;
	}
	if (pSnsObj != CVI_NULL) {
		sns_cfg->pstSnsObj[dev_num] = pSnsObj;
		if (sns_cfg->pstSnsObj[dev_num]->pfnExpSensorCb) {
			sns_cfg->pstSensorExpFunc[dev_num] = &gSensorExpFunc[dev_num];
			if (sns_cfg->pstSnsObj[dev_num]->pfnExpSensorCb(sns_cfg->pstSensorExpFunc[dev_num]) != CVI_SUCCESS) {
				SNS_DBG_PRT("sensor_%d get SnsExpFunc failed!!\n", dev_num);
				return CVI_FAILURE;
			}
		}
		if (sns_cfg->pstSnsObj[dev_num]->pfnExpAeCb) {
			sns_cfg->pstExpFuncs[dev_num] = &gExpFuncs[dev_num];
			if (sns_cfg->pstSnsObj[dev_num]->pfnExpAeCb(sns_cfg->pstExpFuncs[dev_num]) != CVI_SUCCESS) {
				SNS_DBG_PRT("sensor_%d get ExpAeFunc failed!!\n", dev_num);
				return CVI_FAILURE;
			}
		}
		if (sns_cfg->pstSnsObj[dev_num]->pfnAHDCb) {
			sns_cfg->pstAhdFuncs[dev_num] = &gAhdFuncs[dev_num];
			if (sns_cfg->pstSnsObj[dev_num]->pfnAHDCb(sns_cfg->pstAhdFuncs[dev_num])!= CVI_SUCCESS) {
				SNS_DBG_PRT("sensor_%d get AhdFunc failed!!\n", dev_num);
				return CVI_FAILURE;
			}
		}
	} else {
		return CVI_FAILURE;
	}

	return CVI_SUCCESS;
}

CVI_S32 cvi_sns_getsnswdrattr(CVI_U32 dev_num, SENSOR_CFG_S *sensor_cfg)
{
	CMOS_CHECK_POINTER(sensor_cfg);

	ISP_INIT_ATTR_S *pstInitAttr = &sensor_cfg->pstInitAttr;
	SNS_INI_CFG_S *sns_ini_cfg = &sensor_cfg->sns_ini_cfg;

	memset(pstInitAttr, 0, sizeof(ISP_INIT_ATTR_S));
	pstInitAttr->enGainMode = SNS_GAIN_MODE_SHARE;
	if ((sns_ini_cfg->enSnsType[dev_num] == SOI_F35_MIPI_2M_30FPS_10BIT_WDR2TO1) ||
		(sns_ini_cfg->enSnsType[dev_num] == SOI_F35_SLAVE_MIPI_2M_30FPS_10BIT_WDR2TO1) ||
		(sns_ini_cfg->enSnsType[dev_num] == OV_OS08A20_MIPI_8M_30FPS_10BIT_WDR2TO1) ||
		(sns_ini_cfg->enSnsType[dev_num] == OV_OS08A20_MIPI_5M_30FPS_10BIT_WDR2TO1) ||
		(sns_ini_cfg->enSnsType[dev_num] == OV_OS08A20_MIPI_4M_30FPS_10BIT_WDR2TO1) ||
		(sns_ini_cfg->enSnsType[dev_num] == OV_OS08A20_SLAVE_MIPI_4M_30FPS_10BIT_WDR2TO1)) {
		pstInitAttr->enL2SMode = SNS_L2S_MODE_FIX;
	}

	return CVI_SUCCESS;
}