## RTC

### 概要

该文档主要描述RTC模块的CSI2.0自动化测试AT命令。 文档中所涉及的这些命令是用来测试RTC模块的接口工作是否正常、数据传输是否正确、接口返回值是否符合预期。

### 测试原理

测试时，应给被测试板发送RTC测试命令进行相应的测试；测试程序会按照按照测试命令的配置进行相应的RTC测试， 若与预期一致，则相应的测试成功完成，否则测试失败。

### 测试流程

- 测试前应当准备好测试板（以下简称A板）
- 发送RTC测试命令进行测试 （测试命令功能请参照下文）

### RTC功能AT命令列表概览

以下是RTC模块对应的测试命令列表及其功能简要介绍。

| AT命令列表       | 功能                  |
| ---------------- | --------------------- |
| AT+RTC_INTERFACE | RTC接口异常测试       |
| AT+RTC_ALARM     | 测试RTC模块的报警功能 |
| AT+RTC_TIME      | 测试RTC模块的计时功能 |

### 参数列表

以下是RTC模块对应的AT测试命令共用参数的简要介绍。

| 参数名字 | 释义                     | 取值范围                           |
| -------- | ------------------------ | ---------------------------------- |
| idx      | 表示设备号,比如0表示rtc0 | 0、1、...，具体可测编号需参考soc.h |

### 命令详解

#### AT+RTC_INTERFACE

| 命令格式 | AT+RTC_INTERFACE                                             |
| -------- | ------------------------------------------------------------ |
| 命令功能 | RTC接口异常测试。该命令测试RTC所CSI接口的异常调用，测试时将会传入异常和非法参数，验证CSI接口是否返回相应的错误码。 |
| 示例     | 发送命令AT+RTC_INTERFACE到A板，测试完成后，A板对应串口会打印OK；否则测试失败 |

#### AT+RTC_ALARM

| 命令格式 | AT+RTC_ALARM=idx,tm_year,tm_mon,tm_day,tm_hour,tm_min,tm_sec |
|------------------------------------------|--------------------------------------------------------------------------------------------------|
| 命令功能 | RTC模块接口报警功能测试，设置RTC时间，5秒后报警 |
| 示例 | 发送命令AT+RTC_ALARM=0,120,11,31,23,59,59到A板，测试完成后， A板对应串口会打印OK；否则测试失败 |

#### AT+RTC_TIME

| 命令格式 | AT+RTC_TIME=idx,tm_year,tm_mon,tm_day,tm_hour,tm_min,tm_sec  |
| -------- | ------------------------------------------------------------ |
| 命令功能 | RTC模块接口计时功能测试，设置RTC时间，2秒后查看RTC时间是否等于设置的RTC时间+2秒 |
| 示例     | 发送命令AT+RTC_TIME=0,120,11,31,23,59,59到A板，测试完成后， A板对应串口会打印OK；否则测试失败 |

