## WDT

### 概要

该文档主要描述WDT模块的CSI2.0自动化测试AT命令。 文档中所涉及的这些命令是用来测试WDT模块的接口工作是否正常、数据传输是否正确、接口返回值是否符合预期。

### 测试原理

测试时，应给被测试板发送WDT测试命令进行相应的测试；测试程序会按照按照测试命令的配置进行相应的测试， 若结果与预期一致，则相应的测试成功完成，否则测试失败。

### 测试流程

- 测试前应当准备好测试板（以下简称A板）
- 发送WDT测试命令进行测试 （测试命令功能请参照下文）

### WDT功能AT命令列表概览

以下是WDT模块对应的测试命令列表及其功能简要介绍。

| AT命令列表        | 功能                                            |
| ----------------- | ----------------------------------------------- |
| AT+WDT_INTERFACE  | WDT接口异常测试                                 |
| AT+WDT_FEED       | 测试WDT模块的喂狗功能，程序不会复位             |
| AT+WDT_RESET      | 测试WDT的超时复位功能，程序会复位               |
| AT+WDT_STRESS     | WDT的喂狗压力测试                               |
| AT+WDT_START_STOP | 测试WDT模块的启动停止的功能                     |
| AT+WDT_GET_INFO   | 测试WDT的运行状态，查看启停状态和设置的是否相符 |

### 参数列表

以下是WDT模块对应的AT测试命令共用参数的简要介绍。

| 参数名字   | 释义                            | 取值范围                           |
| ---------- | ------------------------------- | ---------------------------------- |
| idx        | 表示设备号,比如0表示wdt0        | 0、1、...，具体可测编号需参考soc.h |
| timeout_ms | 表示超时复位时间(时间单位:毫秒) |                                    |

### 命令详解

#### AT+WDT_INTERFACE

| 命令格式 | AT+WDT_INTERFACE                                             |
| -------- | ------------------------------------------------------------ |
| 命令功能 | WDT接口异常测试。该命令测试WDT所CSI接口的异常调用，测试时将会传入异常和非法参数，验证CSI接口是否返回相应的错误码。 |
| 示例     | 发送命令AT+WDT_INTERFACE到A板，测试完成后，A板对应串口会打印OK；否则测试失败 |

#### AT+WDT_FEED

| 命令格式 | AT+WDT_QUERY_FEED=idx, timeout_ms |
|------------------------------------------|--------------------------------------------------------------------------------------------------|
| 命令功能 | 测试WDT采用查询的方式在超时时间内喂狗，程序不会复位 |
| 示例 | 发送命令AT+WDT_FEED=0,100到A板，测试完成后， A板对应串口会打印OK；否则测试失败 |

#### AT+WDT_RESET

| 命令格式 | AT+WDT_TIMEOUT_RESET=idx, timeout_ms                         |
| -------- | ------------------------------------------------------------ |
| 命令功能 | 测试WDT的超时复位功能，程序会复位                            |
| 示例     | 发送命令AT+WDT_RESET=0,200到A板，测试完成后， A板会复位；否则测试失败 |

#### AT+WDT_STRESS

| 命令格式 | AT+WDT_STRESS=idx, timeout_ms,test_times                     |
| -------- | ------------------------------------------------------------ |
| 命令功能 | WDT的喂狗压力测试，重复喂狗test_times次                      |
| 示例     | 发送命令AT+WDT_STRESS=0,200,10到A板，测试完成后， A板对应串口会打印OK；否则测试失败 |

#### AT+WDT_START_STOP

| 命令格式 | AT+WDT_START_STOP=idx                                        |
| -------- | ------------------------------------------------------------ |
| 命令功能 | 1.测试WDT模块在中断模式下和查询模式下,重复启动wdt<br/>2.测试WDT模块在中断模式下和查询模式下,重复启动再停止wdt<br/>3.测试WDT模块在中断模式下和查询模式下,重复停止wdt |
| 示例     | 发送命令AT+WDT_START_STOP=0到A板，测试完成后， A板对应串口会打印OK；否则测试失败 |

#### AT+WDT_GET_INFO

| 命令格式 | AT+WDT_GET_INFO=idx                                          |
| -------- | ------------------------------------------------------------ |
| 命令功能 | 测试WDT的运行状态，查看启停状态和设置的是否相符              |
| 示例     | 发送命令AT+WDT_GET_INFO=0到A板，测试完成后， A板对应串口会打印OK；否则测试失败 |

